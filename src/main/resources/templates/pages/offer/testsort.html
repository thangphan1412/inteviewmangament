<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        .sort-icon {
            margin-left: 5px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <table>
        <thead>
            <tr>
                <th>Name <i class="fas fa-sort sort-icon" onclick="sortTable('Name')"></i></th>
                <th>Age <i class="fas fa-sort sort-icon" onclick="sortTable('Age')"></i></th>
                <th>City <i class="fas fa-sort sort-icon" onclick="sortTable('City')"></i></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>John</td>
                <td>30</td>
                <td>New York</td>
            </tr>
            <tr>
                <td>Jane</td>
                <td>25</td>
                <td>Los Angeles</td>
            </tr>
            <tr>
                <td>Bob</td>
                <td>40</td>
                <td>Chicago</td>
            </tr>
        </tbody>
    </table>

    <script>
        function sortTable(field) {
            var table = document.querySelector("table");
            var tbody = table.querySelector("tbody");
            var rows = Array.from(tbody.querySelectorAll("tr"));

            var sortOrder = table.dataset.sortOrder || "asc";
            if (table.dataset.sortField === field) {
                sortOrder = sortOrder === "asc" ? "desc" : "asc";
            } else {
                sortOrder = "asc";
            }

            var fieldIndexValue = fieldIndex(field);
            if (fieldIndexValue === -1) {
                console.log("Field not found: " + field);
                return;
            }

            rows.sort(function (a, b) {
                var valueA = a.cells[fieldIndexValue].textContent.toUpperCase();
                var valueB = b.cells[fieldIndexValue].textContent.toUpperCase();
                if (valueA < valueB) {
                    return sortOrder === "asc" ? -1 : 1;
                } else if (valueA > valueB) {
                    return sortOrder === "asc" ? 1 : -1;
                } else {
                    return 0;
                }
            });

            rows.forEach(function (row) {
                tbody.appendChild(row);
            });

            table.dataset.sortOrder = sortOrder;
            table.dataset.sortField = field;
            updateSortIcons(table, field, sortOrder);
        }

        function fieldIndex(field) {
            console.log(field)
            var table = document.querySelector("table");
            var headers = table.querySelectorAll("thead th");
            console.log(headers);
            for (var i = 0; i < headers.length; i++) {
                if (headers[i].innerText.trim() === field) {
                    return i;
                }
            }
            return -1;
        }

        function updateSortIcons(table, field, sortOrder) {
            var sortIcons = table.querySelectorAll(".sort-icon");
            sortIcons.forEach(function (icon) {
                icon.classList.remove("fa-sort-up", "fa-sort-down");
                icon.classList.add("fa-sort");
            });
            var sortIcon = table.querySelector('th[data-sort-field="' + field + '"] .sort-icon');
            if (sortOrder === "asc") {
                sortIcon.classList.remove("fa-sort");
                sortIcon.classList.add("fa-sort-up");
            } else {
                sortIcon.classList.remove("fa-sort");
                sortIcon.classList.add("fa-sort-down");
            }
        }
    </script>
</body>